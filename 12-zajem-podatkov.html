

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Zajem podatkov &#8212; Uvod v programiranje</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '12-zajem-podatkov';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Knjižnica Pandas" href="13-knjiznica-pandas.html" />
    <link rel="prev" title="Regularni izrazi" href="11-regularni-izrazi.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="00-uvod.html">
  
  
  
  
  
    <p class="title logo__title">Uvod v programiranje</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="00-uvod.html">
                    Uvod v programiranje
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Osnove Pythona</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01-uvod-v-python.html">Uvod v Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="02-rekurzija.html">Rekurzija</a></li>
<li class="toctree-l1"><a class="reference internal" href="03-nizi.html">Nizi</a></li>
<li class="toctree-l1"><a class="reference internal" href="04-zanke.html">Zanke</a></li>
<li class="toctree-l1"><a class="reference internal" href="05-seznami-in-nabori.html">Seznami &amp; nabori</a></li>
<li class="toctree-l1"><a class="reference internal" href="07-slovarji-in-mnozice.html">Slovarji &amp; množice</a></li>
<li class="toctree-l1"><a class="reference internal" href="08-razredi.html">Razredi</a></li>
<li class="toctree-l1"><a class="reference internal" href="09-datoteke.html">Datoteke</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Pisanje večjih programov</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="10-nadzor-razlicic.html">Nadzor različic</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Analiza podatkov</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="11-regularni-izrazi.html">Regularni izrazi</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Zajem podatkov</a></li>
<li class="toctree-l1"><a class="reference internal" href="13-knjiznica-pandas.html">Knjižnica Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="14-naivni-bayesov-klasifikator.html">Naivni Bayesov klasifikator</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/12-zajem-podatkov.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Zajem podatkov</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#knjiznica-requests">Knjižnica <code class="docutils literal notranslate"><span class="pre">requests</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#zapis-csv">Zapis CSV</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#normalizacija-podatkov">Normalizacija podatkov</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="zajem-podatkov">
<h1>Zajem podatkov<a class="headerlink" href="#zajem-podatkov" title="Permalink to this heading">#</a></h1>
<p>Zdaj, ko znamo analizirati eno stran filmov, bi radi to ponovili za več strani. Pri tem seveda teh strani ne bomo zajemale ročno, ampak bomo napisali program, ki bo to storil namesto nas.</p>
<section id="knjiznica-requests">
<h2>Knjižnica <code class="docutils literal notranslate"><span class="pre">requests</span></code><a class="headerlink" href="#knjiznica-requests" title="Permalink to this heading">#</a></h2>
<p>Kljub temu, da Pythonova standardna knjižnica že vsebuje modul <code class="docutils literal notranslate"><span class="pre">urllib</span></code> za delo s spletnimi stranmi, bomo uporabili knjižnico <a class="reference external" href="http://docs.python-requests.org/"><code class="docutils literal notranslate"><span class="pre">requests</span></code></a>, ki je bolj enostavna za uporabo, hkrati pa podpira stvari, kot so certifikati, preusmeritve in podobno. Ko si knjižnico enkrat namestimo, lahko strani preprosto preberemo z ukazom</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://www.fmf.uni-lj.si/&#39;</span><span class="p">)</span>
<span class="n">statusna_koda</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">vsebina</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">text</span>
</pre></div>
</div>
<p>Podatke moramo zajeti s strani oblike <code class="docutils literal notranslate"><span class="pre">https://www.imdb.com/search/title/?title_type=feature&amp;sort=num_votes,desc&amp;count=250&amp;start=&lt;START&gt;</span></code>, kjer je <code class="docutils literal notranslate"><span class="pre">&lt;START&gt;</span></code> enak 1, 251, 501 in tako naprej do 9751. Da nam strani ne bo treba zajemati večkrat (ter s tem izgubljati časa in tvegati, da bo strežnik začel zavračati naše zahteve), bomo vsako izmed njih shranili v datoteko:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">st_strani</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">na_stran</span> <span class="o">=</span> <span class="mi">250</span>
<span class="k">for</span> <span class="n">stran</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">st_strani</span><span class="p">):</span>
    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://www.imdb.com/search/title/?title_type=feature&amp;sort=num_votes,desc&amp;count=</span><span class="si">{</span><span class="n">na_stran</span><span class="si">}</span><span class="s2">&amp;start=</span><span class="si">{</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">stran</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">na_stran</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">odziv</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">odziv</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;stran-</span><span class="si">{</span><span class="n">stran</span><span class="si">}</span><span class="s2">.html&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">odziv</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Prišlo je do napake&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Če to sestavimo skupaj s programom za analizo strani iz prejšnjega poglavja dobimo seznam 10000 slovarjev, na primer:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">filmi</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;sifra&quot;</span><span class="p">:</span> <span class="mi">76759</span><span class="p">,</span>
        <span class="s2">&quot;naslov&quot;</span><span class="p">:</span> <span class="s2">&quot;Vojna zvezd&quot;</span><span class="p">,</span>
        <span class="s2">&quot;leto&quot;</span><span class="p">:</span> <span class="mi">1977</span><span class="p">,</span>
        <span class="s2">&quot;ocena&quot;</span><span class="p">:</span> <span class="mf">8.6</span><span class="p">,</span>
        <span class="s2">&quot;reziser&quot;</span><span class="p">:</span> <span class="s2">&quot;George Lucas&quot;</span><span class="p">,</span>
        <span class="s2">&quot;igralci&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;sifra&quot;</span><span class="p">:</span> <span class="mi">80684</span><span class="p">,</span>
        <span class="s2">&quot;naslov&quot;</span><span class="p">:</span> <span class="s2">&quot;Imperij vrača udarec&quot;</span><span class="p">,</span>
        <span class="s2">&quot;leto&quot;</span><span class="p">:</span> <span class="mi">1980</span><span class="p">,</span>
        <span class="s2">&quot;ocena&quot;</span><span class="p">:</span> <span class="mf">8.7</span><span class="p">,</span>
        <span class="s2">&quot;reziser&quot;</span><span class="p">:</span> <span class="s2">&quot;Irvin Kershner&quot;</span><span class="p">,</span>
        <span class="s2">&quot;igralci&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;sifra&quot;</span><span class="p">:</span> <span class="mi">82971</span><span class="p">,</span>
        <span class="s2">&quot;naslov&quot;</span><span class="p">:</span> <span class="s2">&quot;Lov za izgubljenim zakladom&quot;</span><span class="p">,</span>
        <span class="s2">&quot;leto&quot;</span><span class="p">:</span> <span class="mi">1981</span><span class="p">,</span>
        <span class="s2">&quot;ocena&quot;</span><span class="p">:</span> <span class="mf">8.4</span><span class="p">,</span>
        <span class="s2">&quot;reziser&quot;</span><span class="p">:</span> <span class="s2">&quot;Steven Spielberg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;igralci&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;sifra&quot;</span><span class="p">:</span> <span class="mi">86190</span><span class="p">,</span>
        <span class="s2">&quot;naslov&quot;</span><span class="p">:</span> <span class="s2">&quot;Vrnitev jedija&quot;</span><span class="p">,</span>
        <span class="s2">&quot;leto&quot;</span><span class="p">:</span> <span class="mi">1983</span><span class="p">,</span>
        <span class="s2">&quot;ocena&quot;</span><span class="p">:</span> <span class="mf">8.3</span><span class="p">,</span>
        <span class="s2">&quot;reziser&quot;</span><span class="p">:</span> <span class="s2">&quot;Richard Marquand&quot;</span><span class="p">,</span>
        <span class="s2">&quot;igralci&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;sifra&quot;</span><span class="p">:</span> <span class="mi">87469</span><span class="p">,</span>
        <span class="s2">&quot;naslov&quot;</span><span class="p">:</span> <span class="s2">&quot;Indiana Jones in tempelj smrti&quot;</span><span class="p">,</span>
        <span class="s2">&quot;leto&quot;</span><span class="p">:</span> <span class="mi">1984</span><span class="p">,</span>
        <span class="s2">&quot;ocena&quot;</span><span class="p">:</span> <span class="mf">7.6</span><span class="p">,</span>
        <span class="s2">&quot;reziser&quot;</span><span class="p">:</span> <span class="s2">&quot;Steven Spielberg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;igralci&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;sifra&quot;</span><span class="p">:</span> <span class="mi">97576</span><span class="p">,</span>
        <span class="s2">&quot;naslov&quot;</span><span class="p">:</span> <span class="s2">&quot;Indiana Jones in Zadnji križarski pohod&quot;</span><span class="p">,</span>
        <span class="s2">&quot;leto&quot;</span><span class="p">:</span> <span class="mi">1989</span><span class="p">,</span>
        <span class="s2">&quot;ocena&quot;</span><span class="p">:</span> <span class="mf">8.2</span><span class="p">,</span>
        <span class="s2">&quot;reziser&quot;</span><span class="p">:</span> <span class="s2">&quot;Steven Spielberg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;igralci&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span>
    <span class="p">},</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="zapis-csv">
<h2>Zapis CSV<a class="headerlink" href="#zapis-csv" title="Permalink to this heading">#</a></h2>
<p>Prečiščene podatke bi lahko shranili v zapis JSON, vendar jih bomo raje shranili v tabelarično obliko, ki je za analizo primernejša od hierarhične. Za to uporabimo zapis CSV (Comma-Separated Values), ki je univerzalni zapis podatkov v besedilni datoteki. Datoteke CSV lahko odpremo v praktično vsakem programu za delo s podatki. V zapisu CSV vsaka vrstica predstavlja vnos, v katerem so polja ločena z vejico. Prvo vrstico običajno uporabimo za imena polj. Na primer, tabelo:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>id</p></th>
<th class="head text-left"><p>naslov</p></th>
<th class="head text-center"><p>leto</p></th>
<th class="head text-center"><p>ocena</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>76759</p></td>
<td class="text-left"><p>Vojna zvezd</p></td>
<td class="text-center"><p>1977</p></td>
<td class="text-center"><p>8.6</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>80684</p></td>
<td class="text-left"><p>Imperij vrača udarec</p></td>
<td class="text-center"><p>1980</p></td>
<td class="text-center"><p>8.7</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>82971</p></td>
<td class="text-left"><p>Lov za izgubljenim zakladom</p></td>
<td class="text-center"><p>1981</p></td>
<td class="text-center"><p>8.4</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>86190</p></td>
<td class="text-left"><p>Vrnitev jedija</p></td>
<td class="text-center"><p>1983</p></td>
<td class="text-center"><p>8.3</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>87469</p></td>
<td class="text-left"><p>Indiana Jones in tempelj smrti</p></td>
<td class="text-center"><p>1984</p></td>
<td class="text-center"><p>7.6</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>97576</p></td>
<td class="text-left"><p>Indiana Jones in Zadnji križarski pohod</p></td>
<td class="text-center"><p>1989</p></td>
<td class="text-center"><p>8.2</p></td>
</tr>
</tbody>
</table>
<p>bi v zapisu CSV pisali kot:</p>
<div class="highlight-csv notranslate"><div class="highlight"><pre><span></span>id,naslov,leto,ocena
76759,Vojna zvezd,1977,8.6
80684,Imperij vrača udarec,1980,8.7
82971,Lov za izgubljenim zakladom,1981,8.4 
86190,Vrnitev jedija,1983,8.3
87469,Indiana Jones in tempelj smrti,1984,7.6 
97576,Indiana Jones in Zadnji križarski pohod,1989,8.2 
</pre></div>
</div>
<p>Da se izognemo robnim primerom kot vejice v naslovih, CSV datotek ne bomo pisali na roke temveč prek knjižnice <code class="docutils literal notranslate"><span class="pre">csv</span></code>. Iz zgornjega seznama slovarjev lahko CSV datoteko naredimo z:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;filmi.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;naslov&quot;</span><span class="p">,</span> <span class="s2">&quot;leto&quot;</span><span class="p">,</span> <span class="s2">&quot;ocena&quot;</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">film</span> <span class="ow">in</span> <span class="n">podatki</span><span class="p">:</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">film</span><span class="p">[</span><span class="s2">&quot;sifra&quot;</span><span class="p">],</span> <span class="n">film</span><span class="p">[</span><span class="s2">&quot;naslov&quot;</span><span class="p">],</span> <span class="n">film</span><span class="p">[</span><span class="s2">&quot;leto&quot;</span><span class="p">],</span> <span class="n">film</span><span class="p">[</span><span class="s2">&quot;ocena&quot;</span><span class="p">]])</span>
</pre></div>
</div>
<p>Če želimo, lahko vsako vrstico podamo kar neposredno s slovarjem:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;filmi.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;naslov&quot;</span><span class="p">,</span> <span class="s2">&quot;leto&quot;</span><span class="p">,</span> <span class="s2">&quot;ocena&quot;</span><span class="p">])</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">film</span> <span class="ow">in</span> <span class="n">podatki</span><span class="p">:</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">film</span><span class="p">)</span>
</pre></div>
</div>
<p>Podobno lahko s knjižnico CSV tudi beremo datoteke.</p>
</section>
<section id="normalizacija-podatkov">
<h2>Normalizacija podatkov<a class="headerlink" href="#normalizacija-podatkov" title="Permalink to this heading">#</a></h2>
<p>Kako bi v tabeli shranili podatke o režiserju? Očitna rešitev je, da v tabelo dodamo še stolpec z režiserjem, na primer:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>id</p></th>
<th class="head text-left"><p>naslov</p></th>
<th class="head text-center"><p>leto</p></th>
<th class="head text-center"><p>ocena</p></th>
<th class="head text-center"><p>reziser</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>76759</p></td>
<td class="text-left"><p>Vojna zvezd</p></td>
<td class="text-center"><p>1977</p></td>
<td class="text-center"><p>8.6</p></td>
<td class="text-center"><p>George Lucas</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>80684</p></td>
<td class="text-left"><p>Imperij vrača udarec</p></td>
<td class="text-center"><p>1980</p></td>
<td class="text-center"><p>8.7</p></td>
<td class="text-center"><p>Irvin Kershner</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>82971</p></td>
<td class="text-left"><p>Lov za izgubljenim zakladom</p></td>
<td class="text-center"><p>1981</p></td>
<td class="text-center"><p>8.4</p></td>
<td class="text-center"><p>Steven Spilberg</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>86190</p></td>
<td class="text-left"><p>Vrnitev jedija</p></td>
<td class="text-center"><p>1983</p></td>
<td class="text-center"><p>8.3</p></td>
<td class="text-center"><p>Richard Marquand</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>87469</p></td>
<td class="text-left"><p>Indiana Jones in tempelj smrti</p></td>
<td class="text-center"><p>1984</p></td>
<td class="text-center"><p>7.6</p></td>
<td class="text-center"><p>Steven Spielberg</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>97576</p></td>
<td class="text-left"><p>Indiana Jones in Zadnji križarski pohod</p></td>
<td class="text-center"><p>1989</p></td>
<td class="text-center"><p>8.2</p></td>
<td class="text-center"><p>Steven Spielberg</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>…</p></td>
<td class="text-left"><p>…</p></td>
<td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
</tr>
</tbody>
</table>
<p>Vendar ta rešitev ni najboljša. Prva težava je, da je podvajanje podatkov potratno (kaj šele, da bi si ob vsakem režiserju želeli shraniti še življenjepis). Še večja težava pa je, da pri podvajanju podatki niso nujno konsistentni. Na primer, pri tretjem filmu je ime režiserja napisano napačno.</p>
<p>Namesto tega bomo podatke o režiserjih shranili v ločeno tabelo:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>id</p></th>
<th class="head text-center"><p>ime</p></th>
<th class="head text-center"><p>datum_rojstva</p></th>
<th class="head text-center"><p>zivljenjepis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>184</p></td>
<td class="text-center"><p>George Lucas</p></td>
<td class="text-center"><p>1944-05-14</p></td>
<td class="text-center"><p>…</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>229</p></td>
<td class="text-center"><p>Steven Spielberg</p></td>
<td class="text-center"><p>1946-12-18</p></td>
<td class="text-center"><p>…</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>449984</p></td>
<td class="text-center"><p>Irvin Kershner</p></td>
<td class="text-center"><p>1923-04-29</p></td>
<td class="text-center"><p>…</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>549658</p></td>
<td class="text-center"><p>Richard Marquand</p></td>
<td class="text-center"><p>1937-09-22</p></td>
<td class="text-center"><p>…</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
</tr>
</tbody>
</table>
<p>V tabeli filmov bomo shranili samo številko režiserja:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>id</p></th>
<th class="head text-left"><p>naslov</p></th>
<th class="head text-center"><p>leto</p></th>
<th class="head text-center"><p>ocena</p></th>
<th class="head text-center"><p>reziser</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>76759</p></td>
<td class="text-left"><p>Vojna zvezd</p></td>
<td class="text-center"><p>1977</p></td>
<td class="text-center"><p>8.6</p></td>
<td class="text-center"><p>184</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>80684</p></td>
<td class="text-left"><p>Imperij vrača udarec</p></td>
<td class="text-center"><p>1980</p></td>
<td class="text-center"><p>8.7</p></td>
<td class="text-center"><p>449984</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>82971</p></td>
<td class="text-left"><p>Lov za izgubljenim zakladom</p></td>
<td class="text-center"><p>1981</p></td>
<td class="text-center"><p>8.4</p></td>
<td class="text-center"><p>229</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>86190</p></td>
<td class="text-left"><p>Vrnitev jedija</p></td>
<td class="text-center"><p>1983</p></td>
<td class="text-center"><p>8.3</p></td>
<td class="text-center"><p>549658</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>87469</p></td>
<td class="text-left"><p>Indiana Jones in tempelj smrti</p></td>
<td class="text-center"><p>1984</p></td>
<td class="text-center"><p>7.6</p></td>
<td class="text-center"><p>229</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>97576</p></td>
<td class="text-left"><p>Indiana Jones in Zadnji križarski pohod</p></td>
<td class="text-center"><p>1989</p></td>
<td class="text-center"><p>8.2</p></td>
<td class="text-center"><p>229</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>…</p></td>
<td class="text-left"><p>…</p></td>
<td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
</tr>
</tbody>
</table>
<p>Tako vsako podatek zapišemo samo enkrat, zato ni več težav ne s prostorom, ne s konsistentnostjo podatkov. Pravimo, da so podatki <em>normalizirani</em>.</p>
<p>Kako pa bi shranili podatke o igralcih, ki jih je lahko več? (V resnici je tudi režiserjev lahko več, vendar to zaenkrat zanemarimo.) Vemo že, da bomo igralce dodali v tabelo oseb:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>id</p></th>
<th class="head text-center"><p>ime</p></th>
<th class="head text-center"><p>datum_rojstva</p></th>
<th class="head text-center"><p>zivljenjepis</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>125</p></td>
<td class="text-center"><p>Sean Connery</p></td>
<td class="text-center"><p>1930-08-25</p></td>
<td class="text-center"><p>…</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>148</p></td>
<td class="text-center"><p>Harrison Ford</p></td>
<td class="text-center"><p>1942-07-13</p></td>
<td class="text-center"><p>…</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>184</p></td>
<td class="text-center"><p>George Lucas</p></td>
<td class="text-center"><p>1944-05-14</p></td>
<td class="text-center"><p>…</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>229</p></td>
<td class="text-center"><p>Steven Spielberg</p></td>
<td class="text-center"><p>1946-12-18</p></td>
<td class="text-center"><p>…</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
</tr>
</tbody>
</table>
<p>V tabeli filmov bi lahko shranili seznam številk igralcev:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>id</p></th>
<th class="head text-left"><p>naslov</p></th>
<th class="head text-center"><p>leto</p></th>
<th class="head text-center"><p>ocena</p></th>
<th class="head text-center"><p>reziser</p></th>
<th class="head text-center"><p>igralci</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>76759</p></td>
<td class="text-left"><p>Vojna zvezd</p></td>
<td class="text-center"><p>1977</p></td>
<td class="text-center"><p>8.6</p></td>
<td class="text-center"><p>184</p></td>
<td class="text-center"><p>434,148,402</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>80684</p></td>
<td class="text-left"><p>Imperij vrača udarec</p></td>
<td class="text-center"><p>1980</p></td>
<td class="text-center"><p>8.7</p></td>
<td class="text-center"><p>449984</p></td>
<td class="text-center"><p>434,148,402</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>82971</p></td>
<td class="text-left"><p>Lov za izgubljenim zakladom</p></td>
<td class="text-center"><p>1981</p></td>
<td class="text-center"><p>8.4</p></td>
<td class="text-center"><p>229</p></td>
<td class="text-center"><p>148,261</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>86190</p></td>
<td class="text-left"><p>Vrnitev jedija</p></td>
<td class="text-center"><p>1983</p></td>
<td class="text-center"><p>8.3</p></td>
<td class="text-center"><p>549658</p></td>
<td class="text-center"><p>434,148,402</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>87469</p></td>
<td class="text-left"><p>Indiana Jones in tempelj smrti</p></td>
<td class="text-center"><p>1984</p></td>
<td class="text-center"><p>7.6</p></td>
<td class="text-center"><p>229</p></td>
<td class="text-center"><p>148</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>97576</p></td>
<td class="text-left"><p>Indiana Jones in Zadnji križarski pohod</p></td>
<td class="text-center"><p>1989</p></td>
<td class="text-center"><p>8.2</p></td>
<td class="text-center"><p>229</p></td>
<td class="text-center"><p>148,125</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p></p></td>
<td class="text-left"><p>…</p></td>
<td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
</tr>
</tbody>
</table>
<p>Vendar bi bilo po takih podatkih težko iskati. Namesto tega bomo uvedli dodatno <em>povezovalno tabelo</em> vlog, v kateri vsak vnos sporoča, kateri igralec je igral v katerem filmu:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>film</p></th>
<th class="head text-center"><p>oseba</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>76759</p></td>
<td class="text-center"><p>434</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>76759</p></td>
<td class="text-center"><p>148</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>76759</p></td>
<td class="text-center"><p>402</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>80684</p></td>
<td class="text-center"><p>434</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>80684</p></td>
<td class="text-center"><p>148</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
</tr>
</tbody>
</table>
<p>Če tabelo opremimo še s tipom vloge (I - igralec, R - režiser), lahko vanjo shranimo tako podatke o igralcih kot o režiserjih:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>film</p></th>
<th class="head text-center"><p>oseba</p></th>
<th class="head text-center"><p>vloga</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>76759</p></td>
<td class="text-center"><p>148</p></td>
<td class="text-center"><p>I</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>76759</p></td>
<td class="text-center"><p>184</p></td>
<td class="text-center"><p>R</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>76759</p></td>
<td class="text-center"><p>402</p></td>
<td class="text-center"><p>I</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>76759</p></td>
<td class="text-center"><p>434</p></td>
<td class="text-center"><p>I</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>80684</p></td>
<td class="text-center"><p>148</p></td>
<td class="text-center"><p>I</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>80684</p></td>
<td class="text-center"><p>434</p></td>
<td class="text-center"><p>I</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>80684</p></td>
<td class="text-center"><p>449984</p></td>
<td class="text-center"><p>R</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>82971</p></td>
<td class="text-center"><p>229</p></td>
<td class="text-center"><p>R</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>86190</p></td>
<td class="text-center"><p>549658</p></td>
<td class="text-center"><p>R</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>87469</p></td>
<td class="text-center"><p>229</p></td>
<td class="text-center"><p>R</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>97576</p></td>
<td class="text-center"><p>229</p></td>
<td class="text-center"><p>R</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
<td class="text-center"><p>…</p></td>
</tr>
</tbody>
</table>
<p>Če bi kakšna oseba tako režirala nek film kot igrala v njem, bi v tabeli imeli dva vnosa.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="11-regularni-izrazi.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Regularni izrazi</p>
      </div>
    </a>
    <a class="right-next"
       href="13-knjiznica-pandas.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Knjižnica Pandas</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#knjiznica-requests">Knjižnica <code class="docutils literal notranslate"><span class="pre">requests</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#zapis-csv">Zapis CSV</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#normalizacija-podatkov">Normalizacija podatkov</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Matija Pretnar
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>